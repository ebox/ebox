DEPENDENCIES
------------
+ eBox components
	ebox

+ Debian packages (apt-get install <package>)

	postgresql	
	libdb-pg-perl
	libfile-tail-perl

INSTALLATION
------------

* Once dependencies have been installed, type:
	
	./configure
	make install

  configure will autodetect EBox base path to install

* Kill gconf daemon

  pkill gconf

* Set permission 0666 for /etc/ebox/90eboxpglogger.conf

* Copy pgpass from conf/pgpass to .pgpass in /var/lib/ebox/ with perms 0600 and
   owner ebox.ebox

* You should create now the database in postgresql DBMS in order to store logs:

  * Run the following commands into the DBMS if eboxlogs database doesn't exist:
	
	# Enter as a postgres user in the DBMS
    $ su postgres -c "psql template1"
	# Create an eboxlogs database
    > CREATE DATABASE eboxlogs;
	# Create an eboxlogs user
    > CREATE USER eboxlogs PASSWORD 'eboxlogs';
    > GRANT ALL ON DATABASE eboxlogs TO eboxlogs;
 
 * You should create /etc/postgresql/pg_hba.conf with the following content:
<FILE>
# TYPE  DATABASE    USER        IP-ADDRESS        IP-MASK           METHOD
# Database administrative login by UNIX sockets
local   all         postgres                                        ident sameuser
#
# eBox log database
host    $db_name    $db_user     127.0.0.1       255.255.255.255 md5
local   $db_name    $db_user                                        md5
# All IPv4 connections from localhost
host    all         all         127.0.0.1         255.255.255.255  ident sameuser
# 
# All IPv6 localhost connections
host    all         all         ::1               ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff        ident sameuser
host    all         all         ::ffff:127.0.0.1/128                ident sameuser
# 
# reject all other connection attempts
host    all         all         0.0.0.0           0.0.0.0           reject
<EOF>

* Stop postgresql if it is running