<chapter id="ch-ca">
  <title>Gestión de la Autoridad de Certificados</title>

  <section id="sect-ca-prereq">
    <title>Requisitos previos</title>
    <para>
      Es necesario un conocimiento básico de la infraestructura de clave
      pública (<acronym>PKI</acronym>) para el uso del módulo de
      Gestión de Certificados. 
      Un buen sitio para empezar a iniciarse en el tema puede ser
      <ulink  url="http://es.wikipedia.org/wiki/PKI">el artículo de Wikipedia sobre PKI</ulink>
    </para>
  </section>

  <section id="sect-ca-overview">
    <title>Gestión de la Autoridad de Certificados</title>
    <para>
      Puedes acceder a la Gestión de la Autoridad de Certificados a
      través de 
      <menuchoice>
	<guimenu>Gestor de Certificados</guimenu>
      </menuchoice>
    </para>

    <para>
     El propósito del módulo de Gestión de la Autoridad de Certificados es permitir la creación
     de certificados para su uso por otros módulos eBox o por aplicaciones externas. 
    </para>
    <para>
     Los certificados se crean usando un certificado de la autoridad
     de certificación (<acronym>CA</acronym> : "Certification
     Authority") que será creado con este módulo.
    </para>
  </section>

  <section id="sect-create-ca">				
    <title>Creación del certificado de la autoridad de certificación</title>
    <para>
      Primero, es necesario expedir el certificado de la CA, que es
      firmado por sí mismo.
      El certificado de la CA es necesario para expedir nuevos
      certificados; así que el resto de funcionalidad del módulo
      no estará disponible hasta que ésta sea creada.
    </para>
    <para>
      Para crearlo simplemente entraremos en la página del módulo y nos
      encontraremos ante el formulario para crear el certificado de la
      CA.
      Se requerirán el nombre de la organización y el número de
      días que transcurrirán antes de la expiración del certificado.
    </para>
    <warning>
      <para>
	A la hora de establecer la duración del certificado hay que tener
	en cuenta que su expiración revocará todos los certificados
	expedidos por él.
	Esto supondrá la parada de los servicios
	dependientes de la infraestructura de certificación hasta que
	sea restablecida.
      </para>				
    </warning>
    
  </section>

  <section id="sect-create-certificate">
    <title>Creación de certificados </title>
    <para>
      Una vez creado el certificado de la CA, seremos capaces de
      generar certificados con él.
    </para>
    <para>
      Para generarlos tan sólo tendremos que usar el formulario que
      aparece en la parte superior de la página de la autoridad de
      certificación.
      Los datos necesarios son el nombre común del certificado y los
      días que permanecerá activo antes de expirar. Este último dato
      está limitado por el hecho de que ningún certificado puede
      ser válido más tiempo que el certificado de la CA.
    </para>
    <para>
      Una vez el certificado haya sido creado, aparecerá en la lista
      de certificados y estará disponible para los módulos de eBox que
      usen certificados y las demás aplicaciones externas.
    </para>
  </section>
      
  <section id="sect-certificate-actions">
    <title>Acciones sobre certificados</title>
    <para>
      A través de la lista de certificados podemos acceder a distintas
      acciones que realizar con ellas. 
      Las acciones disponibles son <link
      linkend="sect-certificate-actions-download">descargar archivos</link>, 
      <link linkend="sect-certificate-actions-revoke">revocar</link> 
      y <link linkend="sect-certificate-actions-renew">renovar.</link>
    </para>

    <section id="sect-certificate-actions-download">
      <title>Descargar archivos</title>
      <para>
	Pulsando en el icono de descargar obtendremos un archivo
	comprimido en el que podemos encontrar tanto el certificado como sus
	claves publicas y privado.
	En el caso del certificado de la propia autoridad de
	certificación, la clave privada no se encontrará en el archivo.
      </para>
    </section>
      
    <section id="sect-certificate-actions-revoke">
      <title>Revocar</title>
      <para>
	Mediante el icono de revocar, podemos revocar cualquier
	certificado. 
	Tras pulsar en la opción correspondiente nos
	encontraremos en una pantalla donde podremos indicar la razón
	que nos ha llevado a revocarlo o cancelar la acción.
      </para>
      <para>
	Una vez revocado un certificado, continuará apareciendo en la
	lista pero marcado como revocado. Sin embargo, no podrá ser usado ni
	por eBox ni por ninguna aplicación externa.
      </para>
      <warning>
	<para>
	  Si el certificado revocado es el certificado de la CA, 
	  todos los certificados generados con él serán
	  automáticamente revocados
	</para>
      </warning>
    </section>

    <section id="sect-certificate-actions-renew">
      <title>Renovar</title>
      <para>
	Es posible renovar un certificado usando el icono de
	renovar. Será solicitada la nueva duración del certificado.
      </para>
      <para>
	Para renovar un certificado, primero se revoca y a
	continuación se expide uno nuevo.
	Los módulos de eBox serán capaces de obtener el nuevo
	certificado pero se tendrá que suministrar manualmente a las
	aplicaciones externas.
      </para>
      <warning>
	<para>
	  Si renovamos el certificado de la autoridad de certificación,
	  se renovaran automáticamente todos los certificados
	  generados con él. La duración de los certificados renovados
	  automáticamente será hasta la fecha de expiración del
	  certificado de CA.
	</para>
      </warning>
    </section>

  </section>


</chapter>