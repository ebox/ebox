<chapter id="ch-services">
  <title>Servicios de red</title>
  <section id='sect-serv-desc'>
    <title>Servicios de red en eBox</title>
    <para>
      Como ocurría en <xref linkend="ch-objects"/>, los servicios de
      red son una abstracción para facilitar la gestión de tu
      red. Cada servicio de red describe un conjunto de puertos para
      protocolos de Internet donde un servicio acepta peticiones. Dado
      un nombre más una descripción opcional te permite gestionar las
      políticas de un servicio de red de forma más intuitiva y menos
      propensa a errores.
    </para>
    <para>
      Los servicios de red se usan en los módulos de cortafuegos
      (<xref linkend="ch-firewall"/>) y el módulo de moldeado de
      tráfico <!-- FIXME: ch-ts when it's done -->. De todas maneras,
      como base de la filosofía eBox cada característica que use un
      servicio de red debe tener en cuenta a este módulo para
      funcionar y facilitar la vida al administrador.
    </para>
  </section>
  <section id="sect-services-manage">
    <title>Gestión de los servicios de red</title>
    <para>
      Para ir a la gestión de servicios de red hay que ir en el menú a
      <menuchoice>
        <guimenu>Servicios</guimenu>
        </menuchoice>.
    </para>
    <para>
      Quizás ya hayas notado que hay varios servicios que ya han sido
      creados para ti por eBox. Estos servicios los manejan los
      módulos eBox. Por ejemplo, el servicio <emphasis>dhcp</emphasis>
      se describe como un servicio interno llamado '<emphasis>Dynamic
      Host Configuration Protocol</emphasis>'. Este servicio es de
      sólo lectura ya que es gestionado automáticamente por el módulo
      dhcp. Cada servicio tiene una configuración donde se configuran
      el protocolo y los puertos conocidos tanto origen como destino
      del flujo. Hay tres servicios especiales para definir una
      abstracción genérica cada cada servicio
      (<emphasis>cualquiera</emphasis>) y cada servicio TCP/UDP. Se han
      introducido para manejar fácilmente reglas definidas en otros
      módulos.
    </para>
    <para>
      Cuando introduzcas un nuevo servicio tendrá los siguientes
      elementos:
      <variablelist>
        <varlistentry>
          <term>Nombre servicio</term>
          <listitem><para>El nombre para el servicio que se referencia de
          manera única en el sistema.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Descripción</term>
          <listitem><para>Este campo define la descripción larga para
          el servicio de red para facilitar la gestión. Es un campo
          opcional.</para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Interno</term>
          <listitem><para>Cuando un servicio de red se marca como
          interno, los pares protocolo/puerto que pertenecen a dicho
          servicio serán marcados como ocupados y por tanto no estarán
          disponibles para otros servicios.
          </para></listitem>
        </varlistentry>
        <varlistentry>
          <term>Configuración</term>
          <listitem>
            <para>La configuración del servicio es un parámetro
            múltiple que contiene los siguientes tres elementos:
            </para>
            <variablelist>
              <varlistentry>
                <term>Protocolo</term>
                <listitem><para>Es el protocolo de Internet cuyos
                valores pueden ser: TCP/UDP, TCP, UDP, GRE, ICMP o
                "cualquiera". Si el protocolo es GRE o ICMP, entonces
                no se puede poner ningún puerto ya que no tiene
                sentido según la construcción del
                protocolo.</para></listitem>
              </varlistentry>
              <varlistentry>
                <term>Puerto origen</term>
                <listitem>
                  <para>El puerto origen bien conocido cuyo
                  valor puede ser uno de los siguientes:</para>
                  <itemizedlist>
                    <listitem><formalpara>
                      <title>Cualquiera</title>
                      <para>Indica cualquier puerto para ese protocolo o
                      conjunto de ellos</para>
                    </formalpara></listitem>
                    <listitem><formalpara>
                      <title>Un puerto</title>
                      <para>Indica un único puerto para ese protocolo o
                      conjunto de ellos</para>
                    </formalpara></listitem>
                    <listitem><formalpara>
                      <title>Rango de puertos</title>
                      <para>Indica un rango de puertos incluyendo los
                      extremos para ese protocolo o conjunto de ellos</para>
                    </formalpara></listitem>
                  </itemizedlist>
                </listitem>
              </varlistentry>
              <varlistentry>
                <term>Puerto destino</term>
                <listitem><para>De manera análoga al puerto origen,
                los mismos elementos aparecen en el puerto destino.
                </para></listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>
      </variablelist>
      Quizás recorriendo varios de los servicios definidos por el
      sistema antes de añadir los propios pueda ayudar. De todas
      maneras, se puede un servicio definido por un usuario cuando se
      instalen servicios de red adicionales para instalar encima de
      una instalación de eBox. Por ejemplo, introduciendo el servicio
      <emphasis>FTP (File Transfer Protocol)</emphasis>.
    </para>
    <example id="serv-conf-example">
      <title>Ejemplo de configuración de servicio</title>
      <itemizedlist>
        <listitem><formalpara><title>Nombre servicio</title><para>ftp</para></formalpara></listitem>
        <listitem><formalpara><title>Descripción</title><para>File Transfer Protocol</para></formalpara></listitem>
        <listitem><formalpara><title>Interno</title><para>sí</para></formalpara></listitem>
        <listitem>
          <formalpara>
            <title>Configuración:</title>
            <para>
              <itemizedlist>
                <listitem><para>
                  protocolo: tcp, puerto origen: cualquiera, puerto destino:
                  20 (<emphasis>Define el canal de control de conexión</emphasis>) </para>
                </listitem>
                <listitem>
                  <para>protocolo: tcp, puerto origen: cualquiera,
                  puerto destino: 21 (<emphasis>Define el canal de
                  flujo de datos</emphasis>)</para>
                </listitem>
              </itemizedlist>
            </para>
          </formalpara>
        </listitem>
      </itemizedlist>
    </example>

  </section>
</chapter>
