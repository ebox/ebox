#!/bin/sh -e

# Source debconf library.
. /usr/share/debconf/confmodule

db_version 2.0
db_capb backup

db_input critical ebox-control-center/publicip || true
db_go

STATE=1
while [ "$STATE" != 0 -a "$STATE" != 4 ]; do
    case $STATE in
        1)  db_input medium ebox-control-center/soapport || true
            db_go
            ;;
	2)
	    db_input critical ebox-control-center/vpnaddress || true
	    db_go
	    ;;
	3)
	    db_input medium ebox-control-center/vpnprotocol || true
	    db_go
	    db_input medium ebox-control-center/vpnport || true
	    db_go
	    ;;
	4)
	    db_input high ebox-control-center/orgname || true
	    db_go
	    db_input medium ebox-control-center/days || true
	    db_go
	    ;;
    esac

    if db_go; then
	STATE=$(($STATE + 1))
    else
	STATE=$(($STATE - 1))
    fi

done

db_stop
